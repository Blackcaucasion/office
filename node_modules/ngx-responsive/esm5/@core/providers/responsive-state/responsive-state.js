import { __decorate } from "tslib";
/**
 * @name responsive-state
 * @description Core responsive state provider in ngx-responsive
 *
 * @license MIT
 */
import { Injectable } from '@angular/core';
import { BehaviorSubject, combineLatest } from 'rxjs';
import { fromEvent } from 'rxjs';
import { debounceTime } from 'rxjs/operators';
import { defaultIfEmpty } from 'rxjs/operators';
import { map } from 'rxjs/operators';
import { startWith } from 'rxjs/operators';
import { REG_TABLETS, REG_MOBILES, REG_SMARTS_TV, REG_BROWSERS, REG_SORT_NAMES, REG_GAME_DEVICES, REG_BOTS, REG_OS, REG_WINDOWS_OS_VERSION, REG_LINUX_OS, USER_AGENT, REG_IE_VERSIONS, TABLET, WINDOWS_OS, LINUX_OS, MOBILE, IE_VERSIONS } from '../../constants';
import { ResponsiveConfig } from '../responsive-config/responsive-config';
import { PlatformService } from '../platform-service/platform.service';
var ResponsiveState = /** @class */ (function () {
    function ResponsiveState(platformService, _responsiveConfig) {
        this._responsiveConfig = _responsiveConfig;
        this._windows = {};
        this._window = null;
        this._screenWidth = null;
        this._screenHeight = null;
        this._userAgent = null;
        this.isEnabledForPlatform = null;
        this._forceRefresh$ = new BehaviorSubject(null);
        this.isEnabledForPlatform = platformService.isEnabledForPlatform();
        this._window = (this.isEnabledForPlatform) ? window : null;
        this._screenWidth = (this.isEnabledForPlatform) ? this._window.screen.width : 0;
        this._screenHeight = (this.isEnabledForPlatform) ? this._window.screen.height : 0;
        this._userAgent = (this.isEnabledForPlatform) ? this._window.navigator.userAgent.toLowerCase() : null;
        if (this.isEnabledForPlatform) {
            var _resize$ = combineLatest(fromEvent(this._window, 'resize').pipe(debounceTime(this._responsiveConfig.config.debounceTime), defaultIfEmpty(), startWith(this.getWidth('window'))), this._forceRefresh$).pipe(debounceTime(this._responsiveConfig.config.debounceTime));
            var _pixelRatio$ = fromEvent(this._window, 'onload')
                .pipe(defaultIfEmpty(), startWith(this.getDevicePixelRatio()));
            var _device$ = fromEvent(this._window, 'onload')
                .pipe(defaultIfEmpty(), startWith(this.getUserAgent()));
            var _userAgent$ = fromEvent(this._window, 'onload')
                .pipe(defaultIfEmpty(), startWith(this.userAgentData()));
            var _orientation$ = fromEvent(this._window, 'orientationchange')
                .pipe(defaultIfEmpty(), startWith(this.getOrientation()));
            this.elemento$ = _resize$.pipe(map(this.sizeOperations.bind(this)));
            this.ancho$ = _resize$.pipe(map(this.sizeObserver.bind(this)));
            this.browser$ = _device$.pipe(map(this.browserName.bind(this)));
            this.pixel$ = _pixelRatio$.pipe(map(this.pixelRatio.bind(this)));
            this.device$ = _device$.pipe(map(this.deviceDetection.bind(this)));
            this.orientation$ = _orientation$.pipe(map(this.orientationDevice.bind(this)));
            this.standard$ = _device$.pipe(map(this.standardDevices.bind(this)));
            this.ieVersion$ = _device$.pipe(map(this.ieVersionDetect.bind(this)));
            this.userAgent$ = _userAgent$.pipe(map(this.userAgentData.bind(this)));
        }
    }
    ResponsiveState.prototype.forceRefresh = function () {
        this._forceRefresh$.next(null);
    };
    /**
    * @name registerWindow
    * @param rw
    * @param _window
    */
    ResponsiveState.prototype.registerWindow = function (rw, _window) {
        if (_window === void 0) { _window = null; }
        if (rw.name && !this._windows[rw.name]) {
            this._windows[rw.name] = rw;
            if (_window !== null) {
                _window.dispatchEvent(new Event('resize'));
            }
        }
    };
    /**
    * @name unregisterWindow
    * @param rw
    * @param _window
    */
    ResponsiveState.prototype.unregisterWindow = function (rw, _window) {
        if (_window === void 0) { _window = null; }
        for (var rwn in this._windows) {
            if (this._windows[rwn] === rw) {
                delete (this._windows[rwn]);
            }
        }
        if (_window !== null) {
            _window.dispatchEvent(new Event('resize'));
        }
    };
    /**
    * @name getWidth
    * @param windowName
    */
    ResponsiveState.prototype.getWidth = function (windowName) {
        if (windowName === void 0) { windowName = null; }
        if (this._windows !== null && this.isEnabledForPlatform) {
            if (windowName && this._windows[windowName]) {
                return this._windows[windowName].getWidth();
            }
            else {
                return this._window.innerWidth;
            }
        }
        return 0;
    };
    /**
    * @name getDevicePixelRatio
    */
    ResponsiveState.prototype.getDevicePixelRatio = function () {
        var ratio = 1;
        if (this.isEnabledForPlatform) {
            if (typeof this._window.screen.systemXDPI !== 'undefined' &&
                typeof this._window.screen.logicalXDPI !== 'undefined' &&
                this._window.screen.systemXDPI > this._window.screen.logicalXDPI) {
                ratio = this._window.screen.systemXDPI / this._window.screen.logicalXDPI;
            }
            else if (typeof this._window.devicePixelRatio !== 'undefined') {
                ratio = this._window.devicePixelRatio;
            }
        }
        return ratio;
    };
    /**
    * @name getOrientation
    */
    ResponsiveState.prototype.getOrientation = function () {
        return (this.isEnabledForPlatform) ? window.orientation : null;
    };
    /**
    * @name sizeObserver
    */
    ResponsiveState.prototype.sizeObserver = function () {
        return (this._windows !== null && this.isEnabledForPlatform) ? this.getWidth('window') : 0;
    };
    /**
     * @name sizeOperations
     */
    ResponsiveState.prototype.sizeOperations = function () {
        var _sizes = null;
        var _breackpoints = this._responsiveConfig.config.breakPoints;
        if (this._windows !== null && this.isEnabledForPlatform && _breackpoints !== null) {
            var _width = this.getWidth('window');
            if (_breackpoints.xl.min <= _width) {
                _sizes = 'xl';
            }
            else if (_breackpoints.lg.max >= _width && _breackpoints.lg.min <= _width) {
                _sizes = 'lg';
            }
            else if (_breackpoints.md.max >= _width && _breackpoints.md.min <= _width) {
                _sizes = 'md';
            }
            else if (_breackpoints.sm.max >= _width && _breackpoints.sm.min <= _width) {
                _sizes = 'sm';
            }
            else if (_breackpoints.xs.max >= _width) {
                _sizes = 'xs';
            }
        }
        return _sizes;
    };
    /**
     * @name sizeOperations
     */
    ResponsiveState.prototype.pixelRatio = function () {
        var _pixelRatio = null;
        if (this.isEnabledForPlatform && this._screenWidth !== 0 && this._screenHeight !== 0) {
            if (this.testIs4k()) {
                _pixelRatio = '4k';
            }
            else if (this.getDevicePixelRatio() > 1) {
                _pixelRatio = 'retina';
            }
            else if (this.getDevicePixelRatio() === 1) {
                _pixelRatio = '1x';
            }
        }
        return _pixelRatio;
    };
    /**
     * @name testIs4k
     * @param screenHeight
     * @param screenWidth
     */
    ResponsiveState.prototype.testIs4k = function () {
        return (this._screenHeight !== 0 && this._screenWidth !== 0) ?
            ((this._screenHeight < this._screenWidth) ? (this._screenWidth > 3839) : (this._screenHeight > 3839)) : false;
    };
    /**
     * @name orientationDevice
     */
    ResponsiveState.prototype.orientationDevice = function () {
        var _orientationDevice = null;
        if (this.isEnabledForPlatform) {
            if (this.isMobile() || this.isTablet()) {
                if (this._window.innerHeight > this._window.innerWidth) {
                    _orientationDevice = 'portrait';
                }
                else {
                    _orientationDevice = 'landscape';
                }
            }
            else if (this.isSMART() || this.isDesktop()) {
                _orientationDevice = 'landscape';
            }
        }
        return _orientationDevice;
    };
    /**
     * @name getUserAgent
     */
    ResponsiveState.prototype.getUserAgent = function () {
        return (this.isEnabledForPlatform) ? this._window.navigator.userAgent.toLowerCase() : null;
    };
    /**
     * @name userAgentData
     */
    ResponsiveState.prototype.userAgentData = function () {
        if (this._window === null) {
            return USER_AGENT;
        }
        var DEFAULT_USER_AGENT_VALUE = '';
        var _ieVersionState = (this.ieVersionDetect() !== null);
        var _isGameDevice = this.isGameDevice();
        var _isSMART = this.isSMART();
        var _isDesktop = this.isDesktop();
        var _isTablet = this.isTablet();
        var _isMobile = this.isMobile();
        var _isWindows = this.isWindows();
        var _isLinux = this.isLinux();
        return {
            device: this.deviceDetection(),
            browser: this.browserName(),
            pixelratio: this.pixelRatio(),
            ie_version: {
                name: (_ieVersionState) ? this.ieVersionDetect() : DEFAULT_USER_AGENT_VALUE,
                state: _ieVersionState
            },
            game_device: {
                name: (_isGameDevice) ? this.gameDevices() : DEFAULT_USER_AGENT_VALUE,
                state: _isGameDevice
            },
            smart_tv: {
                name: (_isSMART) ? this.smartTv() : DEFAULT_USER_AGENT_VALUE,
                state: _isSMART
            },
            desktop: {
                name: (_isDesktop) ? this.desktop() : DEFAULT_USER_AGENT_VALUE,
                state: _isDesktop
            },
            tablet: {
                name: (_isTablet) ? this.tablet() : DEFAULT_USER_AGENT_VALUE,
                state: _isTablet
            },
            mobile: {
                name: (_isMobile) ? this.mobile() : DEFAULT_USER_AGENT_VALUE,
                state: _isMobile
            },
            window_os: {
                name: (_isWindows) ? this.windows() : DEFAULT_USER_AGENT_VALUE,
                state: _isWindows
            },
            linux_os: {
                name: (_isLinux) ? this.linux() : DEFAULT_USER_AGENT_VALUE,
                state: _isLinux
            },
            bot: this.isBot()
        };
    };
    /**
     * @name deviceDetection
     */
    ResponsiveState.prototype.deviceDetection = function () {
        if (this.isEnabledForPlatform) {
            if (this.isMobile()) {
                return 'mobile';
            }
            else if (this.isTablet()) {
                return 'tablet';
            }
            else if (this.isSMART()) {
                return 'smarttv';
            }
            else if (this.isDesktop()) {
                return 'desktop';
            }
        }
        return null;
    };
    /**
     * @name standardDevices
     */
    ResponsiveState.prototype.standardDevices = function () {
        if (this.isEnabledForPlatform) {
            if (REG_MOBILES.IPHONE.REG.test(this._userAgent)) {
                return 'iphone';
            }
            else if (REG_TABLETS.IPAD.REG.test(this._userAgent)) {
                return 'ipad';
            }
            else if (this.isMobile() && REG_MOBILES.ANDROID.REG.test(this._userAgent)) {
                return 'android mobile';
            }
            else if (this.isTablet() && REG_MOBILES.ANDROID.REG.test(this._userAgent)) {
                return 'android tablet';
            }
            else if (REG_MOBILES.WINDOWS_PHONE.REG.test(this._userAgent)) {
                return 'windows phone';
            }
        }
        return null;
    };
    /**
     * @name ieVersionDetect
     */
    ResponsiveState.prototype.ieVersionDetect = function () {
        if (this.isEnabledForPlatform) {
            var _userAgent = this.getUserAgent();
            var msie = _userAgent.indexOf('msie ');
            var _ieVersion = null;
            if (REG_IE_VERSIONS.MS_MSIE.REG.test(_userAgent)) {
                _ieVersion = parseInt(_userAgent.substring(msie + 5, _userAgent.indexOf('.', msie)), 10);
                if (_ieVersion === 7) {
                    return IE_VERSIONS.IE_7;
                }
                else if (_ieVersion == 8) {
                    return IE_VERSIONS.IE_8;
                }
                else if (_ieVersion == 9) {
                    return IE_VERSIONS.IE_9;
                }
                else if (_ieVersion == 10) {
                    return IE_VERSIONS.IE_10;
                }
            }
            // let trident = this._userAgent.indexOf('trident/')
            if (REG_IE_VERSIONS.MS_TRIDENT.REG.test(_userAgent)) {
                var _rv = _userAgent.indexOf('rv:');
                _ieVersion = parseInt(_userAgent.substring(_rv + 3, _userAgent.indexOf('.', _rv)), 10);
                if (_ieVersion == 11) {
                    return IE_VERSIONS.IE_11;
                }
            }
            // let edge = this._userAgent.indexOf('Edg/')
            if (REG_IE_VERSIONS.MS_EDGE.REG.test(_userAgent)) {
                return IE_VERSIONS.IE_12;
            }
        }
        return null;
    };
    /**
     * @name browserName
     */
    ResponsiveState.prototype.browserName = function () {
        var _browserName = null;
        if (this.isEnabledForPlatform) {
            if (REG_SORT_NAMES.WEBKIT.REG.test(this._userAgent) && REG_SORT_NAMES.CHROME.REG.test(this._userAgent)
                && !REG_BROWSERS.IE.REG.test(this._userAgent)) {
                _browserName = REG_BROWSERS.CHROME.VALUE;
            }
            else if (REG_SORT_NAMES.MOZILLA.REG.test(this._userAgent) &&
                REG_BROWSERS.FIREFOX.REG.test(this._userAgent)) {
                _browserName = REG_BROWSERS.FIREFOX.VALUE;
            }
            else if (REG_BROWSERS.IE.REG.test(this._userAgent)) {
                _browserName = REG_BROWSERS.IE.VALUE;
            }
            else if (REG_SORT_NAMES.SAFARI.REG.test(this._userAgent) &&
                REG_SORT_NAMES.APPLE_WEBKIT.REG.test(this._userAgent) && !REG_SORT_NAMES.CHROME.REG.test(this._userAgent)) {
                _browserName = REG_BROWSERS.SAFARI.VALUE;
            }
            else if (REG_BROWSERS.OPERA.REG.test(this._userAgent)) {
                _browserName = REG_BROWSERS.OPERA.VALUE;
            }
            else if (REG_BROWSERS.SILK.REG.test(this._userAgent)) {
                _browserName = REG_BROWSERS.SILK.VALUE;
            }
            else if (REG_BROWSERS.YANDEX.REG.test(this._userAgent)) {
                _browserName = REG_BROWSERS.YANDEX.VALUE;
            }
            else {
                _browserName = REG_BROWSERS.NA.VALUE;
            }
        }
        return _browserName;
    };
    /**
     * @name gameDevices
     */
    ResponsiveState.prototype.gameDevices = function () {
        var _gameDevice = null;
        if (this._userAgent !== null) {
            for (var _reg in REG_GAME_DEVICES) {
                if (REG_GAME_DEVICES[_reg].REG.test(this._userAgent)) {
                    _gameDevice = REG_GAME_DEVICES[_reg].VALUE;
                }
            }
        }
        return _gameDevice;
    };
    /**
     * @name smartTv
     */
    ResponsiveState.prototype.smartTv = function () {
        var _smartTv = null;
        if (this._userAgent !== null) {
            if (REG_SMARTS_TV.CHROMECAST.REG.test(this._userAgent)) {
                _smartTv = REG_SMARTS_TV.CHROMECAST.VALUE;
            }
            else if (REG_SMARTS_TV.APPLE_TV.REG.test(this._userAgent)) {
                _smartTv = REG_SMARTS_TV.APPLE_TV.VALUE;
            }
            else if (REG_SMARTS_TV.GOOGLE_TV.REG.test(this._userAgent)) {
                _smartTv = REG_SMARTS_TV.GOOGLE_TV.VALUE;
            }
            else if (REG_SMARTS_TV.XBOX_ONE.REG.test(this._userAgent)) {
                _smartTv = REG_SMARTS_TV.XBOX_ONE.VALUE;
            }
            else if (REG_SMARTS_TV.PS4.REG.test(this._userAgent)) {
                _smartTv = REG_SMARTS_TV.PS4.VALUE;
            }
            else if (REG_SMARTS_TV.GENERIC_TV.REG.test(this._userAgent)) {
                _smartTv = REG_SMARTS_TV.GENERIC_TV.VALUE;
            }
        }
        return _smartTv;
    };
    /**
     * @name desktop
     */
    ResponsiveState.prototype.desktop = function () {
        var _desktop = null;
        if (this._userAgent !== null) {
            if (REG_OS.WINDOWS.REG.test(this._userAgent)) {
                _desktop = REG_OS.WINDOWS.VALUE;
            }
            else if (REG_OS.MAC_OS.REG.test(this._userAgent)) {
                _desktop = REG_OS.MAC_OS.VALUE;
            }
            else if (REG_OS.LINUX.REG.test(this._userAgent)) {
                _desktop = REG_OS.LINUX.VALUE;
            }
            else if (REG_OS.FIREFOX_OS.REG.test(this._userAgent)) {
                _desktop = REG_OS.FIREFOX_OS.VALUE;
            }
            else if (REG_OS.FIREFOX_OS.REG.test(this._userAgent)) {
                _desktop = REG_OS.CHROME_OS.VALUE;
            }
        }
        return _desktop;
    };
    /**
     * @name tablet
     */
    ResponsiveState.prototype.tablet = function () {
        var _tablet = null;
        if (this._userAgent !== null) {
            if (REG_TABLETS.IPAD.REG.test(this._userAgent)) {
                _tablet = TABLET.IPAD;
            }
            else if (REG_TABLETS.TABLET.REG.test(this._userAgent) && REG_MOBILES.ANDROID.REG.test(this._userAgent)) {
                _tablet = TABLET.ANDROID;
            }
            else if (REG_TABLETS.KINDLE.REG.test(this._userAgent)) {
                _tablet = TABLET.KINDLE;
            }
            else if (REG_TABLETS.TABLET.REG.test(this._userAgent)) {
                _tablet = TABLET.GENERIC_TABLET;
            }
        }
        return _tablet;
    };
    /**
     * @name mobile
     */
    ResponsiveState.prototype.mobile = function () {
        var _mobile = null;
        if (this._userAgent !== null) {
            for (var _reg in REG_MOBILES) {
                if (REG_MOBILES[_reg].REG.test(this._userAgent)) {
                    _mobile = REG_MOBILES[_reg].VALUE;
                }
            }
            if (_mobile === null && this.isMobile()) {
                _mobile = MOBILE.GENERIC_MOBILE;
            }
        }
        return _mobile;
    };
    /**
     * @name windows
     */
    ResponsiveState.prototype.windows = function () {
        var _windows = null;
        if (this._userAgent !== null) {
            for (var _reg in REG_WINDOWS_OS_VERSION) {
                if (REG_WINDOWS_OS_VERSION[_reg].REG.test(this._userAgent)) {
                    _windows = REG_WINDOWS_OS_VERSION[_reg].VALUE;
                }
            }
            if (_windows === null && this.isDesktop() && this.isWindows()) {
                _windows = WINDOWS_OS.GENERIC_WINDOWS;
            }
        }
        return _windows;
    };
    /**
     * @name linux
     */
    ResponsiveState.prototype.linux = function () {
        var _linux = null;
        if (this._userAgent !== null) {
            for (var _reg in REG_LINUX_OS) {
                if (REG_LINUX_OS[_reg].REG.test(this._userAgent)) {
                    _linux = REG_LINUX_OS[_reg].VALUE;
                }
            }
            if (_linux === null && this.isDesktop() && this.isLinux()) {
                _linux = LINUX_OS.GENERIC_LINUX;
            }
        }
        return _linux;
    };
    /**
     * @name isMobile
     */
    ResponsiveState.prototype.isMobile = function () {
        var _result = false;
        if (this._userAgent !== null) {
            var _userAgent = this._userAgent;
            _result = (REG_MOBILES.GENERIC_REG_1.REG.test(_userAgent) && this.isTablet() === false ||
                REG_MOBILES.GENERIC_REG_2.REG.test(_userAgent.substr(0, 4)) && this.isTablet() === false);
        }
        return _result;
    };
    /**
     * @name isTablet
     */
    ResponsiveState.prototype.isTablet = function () {
        var _result = false;
        if (this._userAgent !== null) {
            _result = (REG_TABLETS.IPAD.REG.test(this._userAgent) ||
                REG_TABLETS.KINDLE.REG.test(this._userAgent) ||
                REG_TABLETS.TABLET.REG.test(this._userAgent));
        }
        return _result;
    };
    /**
     * @name isSMART
     */
    ResponsiveState.prototype.isSMART = function () {
        var _result = false;
        if (this._userAgent !== null) {
            _result = (REG_SMARTS_TV.GENERIC_TV.REG.test(this._userAgent) ||
                REG_SMARTS_TV.PS4.REG.test(this._userAgent) ||
                REG_SMARTS_TV.XBOX_ONE.REG.test(this._userAgent));
        }
        return _result;
    };
    /**
     * @name isDesktop
     */
    ResponsiveState.prototype.isDesktop = function () {
        var _result = false;
        if (this._userAgent !== null) {
            _result = !(this.isMobile() || this.isTablet() || this.isSMART());
        }
        return _result;
    };
    /**
     * @name isGameDevice
     */
    ResponsiveState.prototype.isGameDevice = function () {
        var _result = false;
        if (this._userAgent !== null) {
            _result = (REG_GAME_DEVICES.PS4.REG.test(this._userAgent) || REG_GAME_DEVICES.PS3.REG.test(this._userAgent)
                || REG_GAME_DEVICES.XBOX.REG.test(this._userAgent) || REG_GAME_DEVICES.XBOX_ONE.REG.test(this._userAgent)
                || REG_GAME_DEVICES.WII.REG.test(this._userAgent) || REG_GAME_DEVICES.WII_U.REG.test(this._userAgent)
                || REG_GAME_DEVICES.NINTENDO_3DS.REG.test(this._userAgent) || REG_GAME_DEVICES.PS_VITA.REG.test(this._userAgent)
                || REG_GAME_DEVICES.PSP.REG.test(this._userAgent));
        }
        return _result;
    };
    /**
     * @name isWindows
     */
    ResponsiveState.prototype.isWindows = function () {
        var _result = false;
        if (this._userAgent !== null) {
            _result = (REG_OS.WINDOWS.REG.test(this._userAgent));
        }
        return _result;
    };
    /**
     * @name isLinux
     */
    ResponsiveState.prototype.isLinux = function () {
        var _result = false;
        if (this._userAgent !== null) {
            _result = (REG_OS.LINUX.REG.test(this._userAgent));
        }
        return _result;
    };
    /**
     * @name isBot
     */
    ResponsiveState.prototype.isBot = function () {
        var _result = false;
        if (this._userAgent !== null) {
            _result = (REG_BOTS.GENERIC_BOT.REG.test(this._userAgent));
        }
        return _result;
    };
    ResponsiveState.ctorParameters = function () { return [
        { type: PlatformService },
        { type: ResponsiveConfig }
    ]; };
    ResponsiveState = __decorate([
        Injectable()
    ], ResponsiveState);
    return ResponsiveState;
}());
export { ResponsiveState };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzcG9uc2l2ZS1zdGF0ZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL25neC1yZXNwb25zaXZlLyIsInNvdXJjZXMiOlsiQGNvcmUvcHJvdmlkZXJzL3Jlc3BvbnNpdmUtc3RhdGUvcmVzcG9uc2l2ZS1zdGF0ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7O0dBS0c7QUFDSCxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBYyxlQUFlLEVBQUUsYUFBYSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ2xFLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDakMsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzlDLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNoRCxPQUFPLEVBQUUsR0FBRyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDckMsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRzNDLE9BQU8sRUFDSCxXQUFXLEVBQUUsV0FBVyxFQUFFLGFBQWEsRUFBRSxZQUFZLEVBQUUsY0FBYyxFQUNyRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLHNCQUFzQixFQUFFLFlBQVksRUFDeEUsVUFBVSxFQUFFLGVBQWUsRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQ2pFLFdBQVcsRUFDZCxNQUFNLGlCQUFpQixDQUFDO0FBS3pCLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHdDQUF3QyxDQUFDO0FBQzFFLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxzQ0FBc0MsQ0FBQztBQUd2RTtJQXNCSSx5QkFDSSxlQUFnQyxFQUN4QixpQkFBbUM7UUFBbkMsc0JBQWlCLEdBQWpCLGlCQUFpQixDQUFrQjtRQXRCeEMsYUFBUSxHQUFXLEVBQUUsQ0FBQztRQUN0QixZQUFPLEdBQVEsSUFB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QyxDQUFDO1NBQzlEO1FBQ0QsT0FBTyxPQUFPLENBQUM7SUFDbkIsQ0FBQzs7Z0JBM2xCb0IsZUFBZTtnQkFDTCxnQkFBZ0I7O0lBeEJ0QyxlQUFlO1FBRDNCLFVBQVUsRUFBRTtPQUNBLGVBQWUsQ0FvbkIzQjtJQUFELHNCQUFDO0NBQUEsQUFwbkJELElBb25CQztTQXBuQlksZUFBZSIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBAbmFtZSByZXNwb25zaXZlLXN0YXRlXHJcbiAqIEBkZXNjcmlwdGlvbiBDb3JlIHJlc3BvbnNpdmUgc3RhdGUgcHJvdmlkZXIgaW4gbmd4LXJlc3BvbnNpdmVcclxuICpcclxuICogQGxpY2Vuc2UgTUlUXHJcbiAqL1xyXG5pbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUsIEJlaGF2aW9yU3ViamVjdCwgY29tYmluZUxhdGVzdCB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBmcm9tRXZlbnQgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgZGVib3VuY2VUaW1lIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5pbXBvcnQgeyBkZWZhdWx0SWZFbXB0eSB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuaW1wb3J0IHsgbWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5pbXBvcnQgeyBzdGFydFdpdGggfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcblxyXG5pbXBvcnQgeyBSZXNwb25zaXZlV2luZG93RGlyZWN0aXZlIH0gZnJvbSAnLi4vLi4vLi4vQGRpcmVjdGl2ZXMnO1xyXG5pbXBvcnQge1xyXG4gICAgUkVHX1RBQkxFVFMsIFJFR19NT0JJTEVTLCBSRUdfU01BUlRTX1RWLCBSRUdfQlJPV1NFUlMsIFJFR19TT1JUX05BTUVTLFxyXG4gICAgUkVHX0dBTUVfREVWSUNFUywgUkVHX0JPVFMsIFJFR19PUywgUkVHX1dJTkRPV1NfT1NfVkVSU0lPTiwgUkVHX0xJTlVYX09TLFxyXG4gICAgVVNFUl9BR0VOVCwgUkVHX0lFX1ZFUlNJT05TLCBUQUJMRVQsIFdJTkRPV1NfT1MsIExJTlVYX09TLCBNT0JJTEUsXHJcbiAgICBJRV9WRVJTSU9OU1xyXG59IGZyb20gJy4uLy4uL2NvbnN0YW50cyc7XHJcbmltcG9ydCB7XHJcbiAgICBUTGludXhPUywgVFdpbmRvd3NPUywgVFRhYmxldCwgVE1vYmlsZSxcclxuICAgIFRvc1N5c3RlbXMsIFRTbWFydFR2LCBUR2FtZURldmljZXNcclxufSBmcm9tICcuLi8uLi90eXBlcyc7XHJcbmltcG9ydCB7IFJlc3BvbnNpdmVDb25maWcgfSBmcm9tICcuLi9yZXNwb25zaXZlLWNvbmZpZy9yZXNwb25zaXZlLWNvbmZpZyc7XHJcbmltcG9ydCB7IFBsYXRmb3JtU2VydmljZSB9IGZyb20gJy4uL3BsYXRmb3JtLXNlcnZpY2UvcGxhdGZvcm0uc2VydmljZSc7XHJcblxyXG5ASW5qZWN0YWJsZSgpXHJcbmV4cG9ydCBjbGFzcyBSZXNwb25zaXZlU3RhdGUge1xyXG5cclxuICAgIHB1YmxpYyBfd2luZG93czogT2JqZWN0ID0ge307XHJcbiAgICBwdWJsaWMgX3dpbmRvdzogYW55ID0gbnVsbDtcclxuXHJcbiAgICBwdWJsaWMgZWxlbWVudG8kOiBPYnNlcnZhYmxlPHN0cmluZz47XHJcbiAgICBwdWJsaWMgYW5jaG8kOiBPYnNlcnZhYmxlPG51bWJlcj47XHJcbiAgICBwdWJsaWMgYnJvd3NlciQ6IE9ic2VydmFibGU8c3RyaW5nPjtcclxuICAgIHB1YmxpYyBwaXhlbCQ6IE9ic2VydmFibGU8c3RyaW5nPjtcclxuICAgIHB1YmxpYyBkZXZpY2UkOiBPYnNlcnZhYmxlPGFueT47XHJcbiAgICBwdWJsaWMgb3JpZW50YXRpb24kOiBPYnNlcnZhYmxlPGFueT47XHJcbiAgICBwdWJsaWMgc3RhbmRhcmQkOiBPYnNlcnZhYmxlPGFueT47XHJcbiAgICBwdWJsaWMgaWVWZXJzaW9uJDogT2JzZXJ2YWJsZTxhbnk+O1xyXG4gICAgcHVibGljIHVzZXJBZ2VudCQ6IE9ic2VydmFibGU8YW55PjtcclxuXHJcbiAgICBwcml2YXRlIF9zY3JlZW5XaWR0aDogbnVtYmVyID0gbnVsbDtcclxuICAgIHByaXZhdGUgX3NjcmVlbkhlaWdodDogbnVtYmVyID0gbnVsbDtcclxuICAgIHByaXZhdGUgX3VzZXJBZ2VudDogYW55ID0gbnVsbDtcclxuICAgIHByaXZhdGUgaXNFbmFibGVkRm9yUGxhdGZvcm06IGJvb2xlYW4gPSBudWxsO1xyXG5cclxuICAgIHByaXZhdGUgX2ZvcmNlUmVmcmVzaCQ6IEJlaGF2aW9yU3ViamVjdDxudWxsPiA9IG5ldyBCZWhhdmlvclN1YmplY3Q8bnVsbD4obnVsbCk7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcGxhdGZvcm1TZXJ2aWNlOiBQbGF0Zm9ybVNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSBfcmVzcG9uc2l2ZUNvbmZpZzogUmVzcG9uc2l2ZUNvbmZpZyxcclxuICAgICkge1xyXG4gICAgICAgIHRoaXMuaXNFbmFibGVkRm9yUGxhdGZvcm0gPSBwbGF0Zm9ybVNlcnZpY2UuaXNFbmFibGVkRm9yUGxhdGZvcm0oKTtcclxuICAgICAgICB0aGlzLl93aW5kb3cgPSAodGhpcy5pc0VuYWJsZWRGb3JQbGF0Zm9ybSkgPyB3aW5kb3cgOiBudWxsO1xyXG4gICAgICAgIHRoaXMuX3NjcmVlbldpZHRoID0gKHRoaXMuaXNFbmFibGVkRm9yUGxhdGZvcm0pID8gdGhpcy5fd2luZG93LnNjcmVlbi53aWR0aCA6IDA7XHJcbiAgICAgICAgdGhpcy5fc2NyZWVuSGVpZ2h0ID0gKHRoaXMuaXNFbmFibGVkRm9yUGxhdGZvcm0pID8gdGhpcy5fd2luZG93LnNjcmVlbi5oZWlnaHQgOiAwO1xyXG4gICAgICAgIHRoaXMuX3VzZXJBZ2VudCA9ICh0aGlzLmlzRW5hYmxlZEZvclBsYXRmb3JtKSA/IHRoaXMuX3dpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkgOiBudWxsO1xyXG5cclxuICAgICAgICBpZih0aGlzLmlzRW5hYmxlZEZvclBsYXRmb3JtKSB7XHJcbiAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IF9yZXNpemUkID0gIGNvbWJpbmVMYXRlc3QoXHJcbiAgICAgICAgICAgICAgICBmcm9tRXZlbnQodGhpcy5fd2luZG93LCAncmVzaXplJykucGlwZShcclxuICAgICAgICAgICAgICAgICAgICBkZWJvdW5jZVRpbWUodGhpcy5fcmVzcG9uc2l2ZUNvbmZpZy5jb25maWcuZGVib3VuY2VUaW1lKSxcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0SWZFbXB0eSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0V2l0aCh0aGlzLmdldFdpZHRoKCd3aW5kb3cnKSlcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9mb3JjZVJlZnJlc2gkXHJcbiAgICAgICAgICAgICkucGlwZShcclxuICAgICAgICAgICAgICAgIGRlYm91bmNlVGltZSh0aGlzLl9yZXNwb25zaXZlQ29uZmlnLmNvbmZpZy5kZWJvdW5jZVRpbWUpXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBfcGl4ZWxSYXRpbyQgPSBmcm9tRXZlbnQodGhpcy5fd2luZG93LCAnb25sb2FkJylcclxuICAgICAgICAgICAgICAgIC5waXBlKFxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdElmRW1wdHkoKSxcclxuICAgICAgICAgICAgICAgIHN0YXJ0V2l0aCh0aGlzLmdldERldmljZVBpeGVsUmF0aW8oKSlcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBfZGV2aWNlJCA9IGZyb21FdmVudCh0aGlzLl93aW5kb3csICdvbmxvYWQnKVxyXG4gICAgICAgICAgICAgICAgLnBpcGUoXHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0SWZFbXB0eSgpLFxyXG4gICAgICAgICAgICAgICAgc3RhcnRXaXRoKHRoaXMuZ2V0VXNlckFnZW50KCkpXHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgX3VzZXJBZ2VudCQgPSBmcm9tRXZlbnQodGhpcy5fd2luZG93LCAnb25sb2FkJylcclxuICAgICAgICAgICAgICAgIC5waXBlKFxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdElmRW1wdHkoKSxcclxuICAgICAgICAgICAgICAgIHN0YXJ0V2l0aCh0aGlzLnVzZXJBZ2VudERhdGEoKSlcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBfb3JpZW50YXRpb24kID0gZnJvbUV2ZW50KHRoaXMuX3dpbmRvdywgJ29yaWVudGF0aW9uY2hhbmdlJylcclxuICAgICAgICAgICAgICAgIC5waXBlKFxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdElmRW1wdHkoKSxcclxuICAgICAgICAgICAgICAgIHN0YXJ0V2l0aCh0aGlzLmdldE9yaWVudGF0aW9uKCkpXHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50byQgPSBfcmVzaXplJC5waXBlKG1hcCh0aGlzLnNpemVPcGVyYXRpb25zLmJpbmQodGhpcykpKTtcclxuICAgICAgICAgICAgdGhpcy5hbmNobyQgPSBfcmVzaXplJC5waXBlKG1hcCh0aGlzLnNpemVPYnNlcnZlci5iaW5kKHRoaXMpKSk7XHJcbiAgICAgICAgICAgIHRoaXMuYnJvd3NlciQgPSBfZGV2aWNlJC5waXBlKG1hcCh0aGlzLmJyb3dzZXJOYW1lLmJpbmQodGhpcykpKTtcclxuICAgICAgICAgICAgdGhpcy5waXhlbCQgPSBfcGl4ZWxSYXRpbyQucGlwZShtYXAodGhpcy5waXhlbFJhdGlvLmJpbmQodGhpcykpKTtcclxuICAgICAgICAgICAgdGhpcy5kZXZpY2UkID0gX2RldmljZSQucGlwZShtYXAodGhpcy5kZXZpY2VEZXRlY3Rpb24uYmluZCh0aGlzKSkpO1xyXG4gICAgICAgICAgICB0aGlzLm9yaWVudGF0aW9uJCA9IF9vcmllbnRhdGlvbiQucGlwZShtYXAodGhpcy5vcmllbnRhdGlvbkRldmljZS5iaW5kKHRoaXMpKSk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhbmRhcmQkID0gX2RldmljZSQucGlwZShtYXAodGhpcy5zdGFuZGFyZERldmljZXMuYmluZCh0aGlzKSkpO1xyXG4gICAgICAgICAgICB0aGlzLmllVmVyc2lvbiQgPSBfZGV2aWNlJC5waXBlKG1hcCh0aGlzLmllVmVyc2lvbkRldGVjdC5iaW5kKHRoaXMpKSk7XHJcbiAgICAgICAgICAgIHRoaXMudXNlckFnZW50JCA9IF91c2VyQWdlbnQkLnBpcGUobWFwKHRoaXMudXNlckFnZW50RGF0YS5iaW5kKHRoaXMpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBmb3JjZVJlZnJlc2goKXtcclxuICAgICAgICB0aGlzLl9mb3JjZVJlZnJlc2gkLm5leHQobnVsbCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIEBuYW1lIHJlZ2lzdGVyV2luZG93XHJcbiAgICAqIEBwYXJhbSByd1xyXG4gICAgKiBAcGFyYW0gX3dpbmRvd1xyXG4gICAgKi9cclxuICAgIHB1YmxpYyByZWdpc3RlcldpbmRvdyhydzogUmVzcG9uc2l2ZVdpbmRvd0RpcmVjdGl2ZSwgX3dpbmRvdyA9IG51bGwpIHtcclxuICAgICAgICBpZiAocncubmFtZSAmJiAhdGhpcy5fd2luZG93c1tydy5uYW1lXSkge1xyXG4gICAgICAgICAgICB0aGlzLl93aW5kb3dzW3J3Lm5hbWVdID0gcnc7XHJcbiAgICAgICAgICAgIGlmIChfd2luZG93ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBfd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdyZXNpemUnKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIEBuYW1lIHVucmVnaXN0ZXJXaW5kb3dcclxuICAgICogQHBhcmFtIHJ3XHJcbiAgICAqIEBwYXJhbSBfd2luZG93XHJcbiAgICAqL1xyXG4gICAgcHVibGljIHVucmVnaXN0ZXJXaW5kb3cocnc6IFJlc3BvbnNpdmVXaW5kb3dEaXJlY3RpdmUsIF93aW5kb3cgPSBudWxsKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCByd24gaW4gdGhpcy5fd2luZG93cykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fd2luZG93c1tyd25dID09PSBydykge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlICh0aGlzLl93aW5kb3dzW3J3bl0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChfd2luZG93ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIF93aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ3Jlc2l6ZScpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIEBuYW1lIGdldFdpZHRoXHJcbiAgICAqIEBwYXJhbSB3aW5kb3dOYW1lXHJcbiAgICAqL1xyXG4gICAgcHVibGljIGdldFdpZHRoKHdpbmRvd05hbWU6IHN0cmluZyA9IG51bGwpOiBhbnkge1xyXG4gICAgICAgIGlmICh0aGlzLl93aW5kb3dzICE9PSBudWxsICYmIHRoaXMuaXNFbmFibGVkRm9yUGxhdGZvcm0pIHtcclxuICAgICAgICAgICAgaWYgKHdpbmRvd05hbWUgJiYgdGhpcy5fd2luZG93c1t3aW5kb3dOYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3dpbmRvd3Nbd2luZG93TmFtZV0uZ2V0V2lkdGgoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl93aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gMDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogQG5hbWUgZ2V0RGV2aWNlUGl4ZWxSYXRpb1xyXG4gICAgKi9cclxuICAgIHB1YmxpYyBnZXREZXZpY2VQaXhlbFJhdGlvKCk6IGFueSB7XHJcbiAgICAgICAgbGV0IHJhdGlvID0gMTtcclxuICAgICAgICBpZiAodGhpcy5pc0VuYWJsZWRGb3JQbGF0Zm9ybSkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuX3dpbmRvdy5zY3JlZW4uc3lzdGVtWERQSSAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICAgICAgICAgIHR5cGVvZiB0aGlzLl93aW5kb3cuc2NyZWVuLmxvZ2ljYWxYRFBJICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5fd2luZG93LnNjcmVlbi5zeXN0ZW1YRFBJID4gdGhpcy5fd2luZG93LnNjcmVlbi5sb2dpY2FsWERQSSkge1xyXG4gICAgICAgICAgICAgICAgcmF0aW8gPSB0aGlzLl93aW5kb3cuc2NyZWVuLnN5c3RlbVhEUEkgLyB0aGlzLl93aW5kb3cuc2NyZWVuLmxvZ2ljYWxYRFBJO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzLl93aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIHJhdGlvID0gdGhpcy5fd2luZG93LmRldmljZVBpeGVsUmF0aW87XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJhdGlvO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBAbmFtZSBnZXRPcmllbnRhdGlvblxyXG4gICAgKi9cclxuICAgIHB1YmxpYyBnZXRPcmllbnRhdGlvbigpOiBhbnkge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5pc0VuYWJsZWRGb3JQbGF0Zm9ybSkgPyB3aW5kb3cub3JpZW50YXRpb24gOiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBAbmFtZSBzaXplT2JzZXJ2ZXJcclxuICAgICovXHJcbiAgICBwdWJsaWMgc2l6ZU9ic2VydmVyKCk6IGFueSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLl93aW5kb3dzICE9PSBudWxsICYmIHRoaXMuaXNFbmFibGVkRm9yUGxhdGZvcm0pID8gdGhpcy5nZXRXaWR0aCgnd2luZG93JykgOiAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5hbWUgc2l6ZU9wZXJhdGlvbnNcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNpemVPcGVyYXRpb25zKCk6IGFueSB7XHJcbiAgICAgICAgbGV0IF9zaXplcyA9IG51bGw7XHJcbiAgICAgICAgY29uc3QgX2JyZWFja3BvaW50cyA9IHRoaXMuX3Jlc3BvbnNpdmVDb25maWcuY29uZmlnLmJyZWFrUG9pbnRzO1xyXG4gICAgICAgIGlmICh0aGlzLl93aW5kb3dzICE9PSBudWxsICYmIHRoaXMuaXNFbmFibGVkRm9yUGxhdGZvcm0gJiYgX2JyZWFja3BvaW50cyAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjb25zdCBfd2lkdGggPSB0aGlzLmdldFdpZHRoKCd3aW5kb3cnKTtcclxuICAgICAgICAgICAgaWYgKF9icmVhY2twb2ludHMueGwubWluIDw9IF93aWR0aCkge1xyXG4gICAgICAgICAgICAgICAgX3NpemVzID0gJ3hsJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChfYnJlYWNrcG9pbnRzLmxnLm1heCA+PSBfd2lkdGggJiYgX2JyZWFja3BvaW50cy5sZy5taW4gPD0gX3dpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICBfc2l6ZXMgPSAnbGcnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKF9icmVhY2twb2ludHMubWQubWF4ID49IF93aWR0aCAmJiBfYnJlYWNrcG9pbnRzLm1kLm1pbiA8PSBfd2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIF9zaXplcyA9ICdtZCc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoX2JyZWFja3BvaW50cy5zbS5tYXggPj0gX3dpZHRoICYmIF9icmVhY2twb2ludHMuc20ubWluIDw9IF93aWR0aCkge1xyXG4gICAgICAgICAgICAgICAgX3NpemVzID0gJ3NtJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChfYnJlYWNrcG9pbnRzLnhzLm1heCA+PSBfd2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIF9zaXplcyA9ICd4cyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF9zaXplcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuYW1lIHNpemVPcGVyYXRpb25zXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBwaXhlbFJhdGlvKCk6IGFueSB7XHJcbiAgICAgICAgbGV0IF9waXhlbFJhdGlvID0gbnVsbDtcclxuICAgICAgICBpZiAodGhpcy5pc0VuYWJsZWRGb3JQbGF0Zm9ybSAmJiB0aGlzLl9zY3JlZW5XaWR0aCAhPT0gMCAmJiB0aGlzLl9zY3JlZW5IZWlnaHQgIT09IDApIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudGVzdElzNGsoKSkge1xyXG4gICAgICAgICAgICAgICAgX3BpeGVsUmF0aW8gPSAnNGsnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZ2V0RGV2aWNlUGl4ZWxSYXRpbygpID4gMSkge1xyXG4gICAgICAgICAgICAgICAgX3BpeGVsUmF0aW8gPSAncmV0aW5hJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdldERldmljZVBpeGVsUmF0aW8oKSA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgX3BpeGVsUmF0aW8gPSAnMXgnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBfcGl4ZWxSYXRpbztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuYW1lIHRlc3RJczRrXHJcbiAgICAgKiBAcGFyYW0gc2NyZWVuSGVpZ2h0XHJcbiAgICAgKiBAcGFyYW0gc2NyZWVuV2lkdGhcclxuICAgICAqL1xyXG4gICAgcHVibGljIHRlc3RJczRrKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5fc2NyZWVuSGVpZ2h0ICE9PSAwICYmIHRoaXMuX3NjcmVlbldpZHRoICE9PSAwKSA/XHJcbiAgICAgICAgICAgICgodGhpcy5fc2NyZWVuSGVpZ2h0IDwgdGhpcy5fc2NyZWVuV2lkdGgpID8gKHRoaXMuX3NjcmVlbldpZHRoID4gMzgzOSkgOiAodGhpcy5fc2NyZWVuSGVpZ2h0ID4gMzgzOSkpIDogZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmFtZSBvcmllbnRhdGlvbkRldmljZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgb3JpZW50YXRpb25EZXZpY2UoKTogYW55IHtcclxuICAgICAgICBsZXQgX29yaWVudGF0aW9uRGV2aWNlID0gbnVsbDtcclxuICAgICAgICBpZiAodGhpcy5pc0VuYWJsZWRGb3JQbGF0Zm9ybSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc01vYmlsZSgpIHx8IHRoaXMuaXNUYWJsZXQoKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3dpbmRvdy5pbm5lckhlaWdodCA+IHRoaXMuX3dpbmRvdy5pbm5lcldpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX29yaWVudGF0aW9uRGV2aWNlID0gJ3BvcnRyYWl0JztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX29yaWVudGF0aW9uRGV2aWNlID0gJ2xhbmRzY2FwZSc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5pc1NNQVJUKCkgfHwgdGhpcy5pc0Rlc2t0b3AoKSkge1xyXG4gICAgICAgICAgICAgICAgX29yaWVudGF0aW9uRGV2aWNlID0gJ2xhbmRzY2FwZSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF9vcmllbnRhdGlvbkRldmljZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuYW1lIGdldFVzZXJBZ2VudFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0VXNlckFnZW50KCk6IGFueSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmlzRW5hYmxlZEZvclBsYXRmb3JtKSA/IHRoaXMuX3dpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkgOiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5hbWUgdXNlckFnZW50RGF0YVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdXNlckFnZW50RGF0YSgpOiBhbnkge1xyXG4gICAgICAgIGlmICh0aGlzLl93aW5kb3cgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFVTRVJfQUdFTlQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IERFRkFVTFRfVVNFUl9BR0VOVF9WQUxVRSA9ICcnO1xyXG4gICAgICAgIGNvbnN0IF9pZVZlcnNpb25TdGF0ZSA9ICh0aGlzLmllVmVyc2lvbkRldGVjdCgpICE9PSBudWxsKTtcclxuICAgICAgICBjb25zdCBfaXNHYW1lRGV2aWNlID0gdGhpcy5pc0dhbWVEZXZpY2UoKTtcclxuICAgICAgICBjb25zdCBfaXNTTUFSVCA9IHRoaXMuaXNTTUFSVCgpO1xyXG4gICAgICAgIGNvbnN0IF9pc0Rlc2t0b3AgPSB0aGlzLmlzRGVza3RvcCgpO1xyXG4gICAgICAgIGNvbnN0IF9pc1RhYmxldCA9IHRoaXMuaXNUYWJsZXQoKTtcclxuICAgICAgICBjb25zdCBfaXNNb2JpbGUgPSB0aGlzLmlzTW9iaWxlKCk7XHJcbiAgICAgICAgY29uc3QgX2lzV2luZG93cyA9IHRoaXMuaXNXaW5kb3dzKCk7XHJcbiAgICAgICAgY29uc3QgX2lzTGludXggPSB0aGlzLmlzTGludXgoKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBkZXZpY2U6IHRoaXMuZGV2aWNlRGV0ZWN0aW9uKCksXHJcbiAgICAgICAgICAgIGJyb3dzZXI6IHRoaXMuYnJvd3Nlck5hbWUoKSxcclxuICAgICAgICAgICAgcGl4ZWxyYXRpbzogdGhpcy5waXhlbFJhdGlvKCksXHJcbiAgICAgICAgICAgIGllX3ZlcnNpb246IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IChfaWVWZXJzaW9uU3RhdGUpID8gdGhpcy5pZVZlcnNpb25EZXRlY3QoKSA6IERFRkFVTFRfVVNFUl9BR0VOVF9WQUxVRSxcclxuICAgICAgICAgICAgICAgIHN0YXRlOiBfaWVWZXJzaW9uU3RhdGVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZ2FtZV9kZXZpY2U6IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IChfaXNHYW1lRGV2aWNlKSA/IHRoaXMuZ2FtZURldmljZXMoKSA6IERFRkFVTFRfVVNFUl9BR0VOVF9WQUxVRSxcclxuICAgICAgICAgICAgICAgIHN0YXRlOiBfaXNHYW1lRGV2aWNlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNtYXJ0X3R2OiB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAoX2lzU01BUlQpID8gdGhpcy5zbWFydFR2KCkgOiBERUZBVUxUX1VTRVJfQUdFTlRfVkFMVUUsXHJcbiAgICAgICAgICAgICAgICBzdGF0ZTogX2lzU01BUlRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGVza3RvcDoge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogKF9pc0Rlc2t0b3ApID8gdGhpcy5kZXNrdG9wKCkgOiBERUZBVUxUX1VTRVJfQUdFTlRfVkFMVUUsXHJcbiAgICAgICAgICAgICAgICBzdGF0ZTogX2lzRGVza3RvcFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0YWJsZXQ6IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IChfaXNUYWJsZXQpID8gdGhpcy50YWJsZXQoKSA6IERFRkFVTFRfVVNFUl9BR0VOVF9WQUxVRSxcclxuICAgICAgICAgICAgICAgIHN0YXRlOiBfaXNUYWJsZXRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbW9iaWxlOiB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAoX2lzTW9iaWxlKSA/IHRoaXMubW9iaWxlKCkgOiBERUZBVUxUX1VTRVJfQUdFTlRfVkFMVUUsXHJcbiAgICAgICAgICAgICAgICBzdGF0ZTogX2lzTW9iaWxlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHdpbmRvd19vczoge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogKF9pc1dpbmRvd3MpID8gdGhpcy53aW5kb3dzKCkgOiBERUZBVUxUX1VTRVJfQUdFTlRfVkFMVUUsXHJcbiAgICAgICAgICAgICAgICBzdGF0ZTogX2lzV2luZG93c1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBsaW51eF9vczoge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogKF9pc0xpbnV4KSA/IHRoaXMubGludXgoKSA6IERFRkFVTFRfVVNFUl9BR0VOVF9WQUxVRSxcclxuICAgICAgICAgICAgICAgIHN0YXRlOiBfaXNMaW51eFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBib3Q6IHRoaXMuaXNCb3QoKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmFtZSBkZXZpY2VEZXRlY3Rpb25cclxuICAgICAqL1xyXG4gICAgcHVibGljIGRldmljZURldGVjdGlvbigpOiBhbnkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRW5hYmxlZEZvclBsYXRmb3JtKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzTW9iaWxlKCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnbW9iaWxlJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzVGFibGV0KCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAndGFibGV0JztcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzU01BUlQoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdzbWFydHR2JztcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzRGVza3RvcCgpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2Rlc2t0b3AnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5hbWUgc3RhbmRhcmREZXZpY2VzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGFuZGFyZERldmljZXMoKTogYW55IHtcclxuICAgICAgICBpZiAodGhpcy5pc0VuYWJsZWRGb3JQbGF0Zm9ybSkge1xyXG4gICAgICAgICAgICBpZiAoUkVHX01PQklMRVMuSVBIT05FLlJFRy50ZXN0KHRoaXMuX3VzZXJBZ2VudCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnaXBob25lJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChSRUdfVEFCTEVUUy5JUEFELlJFRy50ZXN0KHRoaXMuX3VzZXJBZ2VudCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnaXBhZCc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5pc01vYmlsZSgpICYmIFJFR19NT0JJTEVTLkFORFJPSUQuUkVHLnRlc3QodGhpcy5fdXNlckFnZW50KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdhbmRyb2lkIG1vYmlsZSc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5pc1RhYmxldCgpICYmIFJFR19NT0JJTEVTLkFORFJPSUQuUkVHLnRlc3QodGhpcy5fdXNlckFnZW50KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdhbmRyb2lkIHRhYmxldCc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoUkVHX01PQklMRVMuV0lORE9XU19QSE9ORS5SRUcudGVzdCh0aGlzLl91c2VyQWdlbnQpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3dpbmRvd3MgcGhvbmUnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5hbWUgaWVWZXJzaW9uRGV0ZWN0XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpZVZlcnNpb25EZXRlY3QoKTogYW55IHtcclxuICAgICAgICBpZiAodGhpcy5pc0VuYWJsZWRGb3JQbGF0Zm9ybSkge1xyXG4gICAgICAgICAgICBjb25zdCBfdXNlckFnZW50ID0gdGhpcy5nZXRVc2VyQWdlbnQoKTtcclxuICAgICAgICAgICAgY29uc3QgbXNpZSA9IF91c2VyQWdlbnQuaW5kZXhPZignbXNpZSAnKTtcclxuICAgICAgICAgICAgbGV0IF9pZVZlcnNpb24gPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAoUkVHX0lFX1ZFUlNJT05TLk1TX01TSUUuUkVHLnRlc3QoX3VzZXJBZ2VudCkpIHtcclxuICAgICAgICAgICAgICAgIF9pZVZlcnNpb24gPSBwYXJzZUludChfdXNlckFnZW50LnN1YnN0cmluZyhtc2llICsgNSwgX3VzZXJBZ2VudC5pbmRleE9mKCcuJywgbXNpZSkpLCAxMCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2llVmVyc2lvbiA9PT0gNykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJRV9WRVJTSU9OUy5JRV83O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfaWVWZXJzaW9uID09IDgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSUVfVkVSU0lPTlMuSUVfODtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoX2llVmVyc2lvbiA9PSA5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElFX1ZFUlNJT05TLklFXzk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF9pZVZlcnNpb24gPT0gMTApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSUVfVkVSU0lPTlMuSUVfMTA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gbGV0IHRyaWRlbnQgPSB0aGlzLl91c2VyQWdlbnQuaW5kZXhPZigndHJpZGVudC8nKVxyXG4gICAgICAgICAgICBpZiAoUkVHX0lFX1ZFUlNJT05TLk1TX1RSSURFTlQuUkVHLnRlc3QoX3VzZXJBZ2VudCkpIHtcclxuICAgICAgICAgICAgICAgIGxldCBfcnYgPSBfdXNlckFnZW50LmluZGV4T2YoJ3J2OicpO1xyXG4gICAgICAgICAgICAgICAgX2llVmVyc2lvbiA9IHBhcnNlSW50KF91c2VyQWdlbnQuc3Vic3RyaW5nKF9ydiArIDMsIF91c2VyQWdlbnQuaW5kZXhPZignLicsIF9ydikpLCAxMCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2llVmVyc2lvbiA9PSAxMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJRV9WRVJTSU9OUy5JRV8xMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gbGV0IGVkZ2UgPSB0aGlzLl91c2VyQWdlbnQuaW5kZXhPZignRWRnLycpXHJcbiAgICAgICAgICAgIGlmIChSRUdfSUVfVkVSU0lPTlMuTVNfRURHRS5SRUcudGVzdChfdXNlckFnZW50KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIElFX1ZFUlNJT05TLklFXzEyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5hbWUgYnJvd3Nlck5hbWVcclxuICAgICAqL1xyXG4gICAgcHVibGljIGJyb3dzZXJOYW1lKCk6IGFueSB7XHJcbiAgICAgICAgbGV0IF9icm93c2VyTmFtZSA9IG51bGw7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNFbmFibGVkRm9yUGxhdGZvcm0pIHtcclxuICAgICAgICAgICAgaWYgKFJFR19TT1JUX05BTUVTLldFQktJVC5SRUcudGVzdCh0aGlzLl91c2VyQWdlbnQpICYmIFJFR19TT1JUX05BTUVTLkNIUk9NRS5SRUcudGVzdCh0aGlzLl91c2VyQWdlbnQpXHJcbiAgICAgICAgICAgICAgICAmJiAhUkVHX0JST1dTRVJTLklFLlJFRy50ZXN0KHRoaXMuX3VzZXJBZ2VudCkpIHtcclxuICAgICAgICAgICAgICAgIF9icm93c2VyTmFtZSA9IFJFR19CUk9XU0VSUy5DSFJPTUUuVkFMVUU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoUkVHX1NPUlRfTkFNRVMuTU9aSUxMQS5SRUcudGVzdCh0aGlzLl91c2VyQWdlbnQpICYmXHJcbiAgICAgICAgICAgICAgICBSRUdfQlJPV1NFUlMuRklSRUZPWC5SRUcudGVzdCh0aGlzLl91c2VyQWdlbnQpKSB7XHJcbiAgICAgICAgICAgICAgICBfYnJvd3Nlck5hbWUgPSBSRUdfQlJPV1NFUlMuRklSRUZPWC5WQUxVRTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChSRUdfQlJPV1NFUlMuSUUuUkVHLnRlc3QodGhpcy5fdXNlckFnZW50KSkge1xyXG4gICAgICAgICAgICAgICAgX2Jyb3dzZXJOYW1lID0gUkVHX0JST1dTRVJTLklFLlZBTFVFO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFJFR19TT1JUX05BTUVTLlNBRkFSSS5SRUcudGVzdCh0aGlzLl91c2VyQWdlbnQpICYmXHJcbiAgICAgICAgICAgICAgICBSRUdfU09SVF9OQU1FUy5BUFBMRV9XRUJLSVQuUkVHLnRlc3QodGhpcy5fdXNlckFnZW50KSAmJiAhUkVHX1NPUlRfTkFNRVMuQ0hST01FLlJFRy50ZXN0KHRoaXMuX3VzZXJBZ2VudCkpIHtcclxuICAgICAgICAgICAgICAgIF9icm93c2VyTmFtZSA9IFJFR19CUk9XU0VSUy5TQUZBUkkuVkFMVUU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoUkVHX0JST1dTRVJTLk9QRVJBLlJFRy50ZXN0KHRoaXMuX3VzZXJBZ2VudCkpIHtcclxuICAgICAgICAgICAgICAgIF9icm93c2VyTmFtZSA9IFJFR19CUk9XU0VSUy5PUEVSQS5WQUxVRTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChSRUdfQlJPV1NFUlMuU0lMSy5SRUcudGVzdCh0aGlzLl91c2VyQWdlbnQpKSB7XHJcbiAgICAgICAgICAgICAgICBfYnJvd3Nlck5hbWUgPSBSRUdfQlJPV1NFUlMuU0lMSy5WQUxVRTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChSRUdfQlJPV1NFUlMuWUFOREVYLlJFRy50ZXN0KHRoaXMuX3VzZXJBZ2VudCkpIHtcclxuICAgICAgICAgICAgICAgIF9icm93c2VyTmFtZSA9IFJFR19CUk9XU0VSUy5ZQU5ERVguVkFMVUU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfYnJvd3Nlck5hbWUgPSBSRUdfQlJPV1NFUlMuTkEuVkFMVUU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF9icm93c2VyTmFtZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuYW1lIGdhbWVEZXZpY2VzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnYW1lRGV2aWNlcygpOiBUR2FtZURldmljZXMge1xyXG4gICAgICAgIGxldCBfZ2FtZURldmljZSA9IG51bGw7XHJcbiAgICAgICAgaWYgKHRoaXMuX3VzZXJBZ2VudCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBfcmVnIGluIFJFR19HQU1FX0RFVklDRVMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChSRUdfR0FNRV9ERVZJQ0VTW19yZWddLlJFRy50ZXN0KHRoaXMuX3VzZXJBZ2VudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBfZ2FtZURldmljZSA9IFJFR19HQU1FX0RFVklDRVNbX3JlZ10uVkFMVUU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF9nYW1lRGV2aWNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5hbWUgc21hcnRUdlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc21hcnRUdigpOiBUU21hcnRUdiB7XHJcbiAgICAgICAgbGV0IF9zbWFydFR2ID0gbnVsbDtcclxuICAgICAgICBpZiAodGhpcy5fdXNlckFnZW50ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGlmIChSRUdfU01BUlRTX1RWLkNIUk9NRUNBU1QuUkVHLnRlc3QodGhpcy5fdXNlckFnZW50KSkge1xyXG4gICAgICAgICAgICAgICAgX3NtYXJ0VHYgPSBSRUdfU01BUlRTX1RWLkNIUk9NRUNBU1QuVkFMVUU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoUkVHX1NNQVJUU19UVi5BUFBMRV9UVi5SRUcudGVzdCh0aGlzLl91c2VyQWdlbnQpKSB7XHJcbiAgICAgICAgICAgICAgICBfc21hcnRUdiA9IFJFR19TTUFSVFNfVFYuQVBQTEVfVFYuVkFMVUU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoUkVHX1NNQVJUU19UVi5HT09HTEVfVFYuUkVHLnRlc3QodGhpcy5fdXNlckFnZW50KSkge1xyXG4gICAgICAgICAgICAgICAgX3NtYXJ0VHYgPSBSRUdfU01BUlRTX1RWLkdPT0dMRV9UVi5WQUxVRTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChSRUdfU01BUlRTX1RWLlhCT1hfT05FLlJFRy50ZXN0KHRoaXMuX3VzZXJBZ2VudCkpIHtcclxuICAgICAgICAgICAgICAgIF9zbWFydFR2ID0gUkVHX1NNQVJUU19UVi5YQk9YX09ORS5WQUxVRTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChSRUdfU01BUlRTX1RWLlBTNC5SRUcudGVzdCh0aGlzLl91c2VyQWdlbnQpKSB7XHJcbiAgICAgICAgICAgICAgICBfc21hcnRUdiA9IFJFR19TTUFSVFNfVFYuUFM0LlZBTFVFO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFJFR19TTUFSVFNfVFYuR0VORVJJQ19UVi5SRUcudGVzdCh0aGlzLl91c2VyQWdlbnQpKSB7XHJcbiAgICAgICAgICAgICAgICBfc21hcnRUdiA9IFJFR19TTUFSVFNfVFYuR0VORVJJQ19UVi5WQUxVRTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gX3NtYXJ0VHY7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmFtZSBkZXNrdG9wXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkZXNrdG9wKCk6IFRvc1N5c3RlbXMge1xyXG4gICAgICAgIGxldCBfZGVza3RvcCA9IG51bGw7XHJcbiAgICAgICAgaWYgKHRoaXMuX3VzZXJBZ2VudCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpZiAoUkVHX09TLldJTkRPV1MuUkVHLnRlc3QodGhpcy5fdXNlckFnZW50KSkge1xyXG4gICAgICAgICAgICAgICAgX2Rlc2t0b3AgPSBSRUdfT1MuV0lORE9XUy5WQUxVRTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChSRUdfT1MuTUFDX09TLlJFRy50ZXN0KHRoaXMuX3VzZXJBZ2VudCkpIHtcclxuICAgICAgICAgICAgICAgIF9kZXNrdG9wID0gUkVHX09TLk1BQ19PUy5WQUxVRTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChSRUdfT1MuTElOVVguUkVHLnRlc3QodGhpcy5fdXNlckFnZW50KSkge1xyXG4gICAgICAgICAgICAgICAgX2Rlc2t0b3AgPSBSRUdfT1MuTElOVVguVkFMVUU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoUkVHX09TLkZJUkVGT1hfT1MuUkVHLnRlc3QodGhpcy5fdXNlckFnZW50KSkge1xyXG4gICAgICAgICAgICAgICAgX2Rlc2t0b3AgPSBSRUdfT1MuRklSRUZPWF9PUy5WQUxVRTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChSRUdfT1MuRklSRUZPWF9PUy5SRUcudGVzdCh0aGlzLl91c2VyQWdlbnQpKSB7XHJcbiAgICAgICAgICAgICAgICBfZGVza3RvcCA9IFJFR19PUy5DSFJPTUVfT1MuVkFMVUU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF9kZXNrdG9wO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5hbWUgdGFibGV0XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB0YWJsZXQoKTogVFRhYmxldCB7XHJcbiAgICAgICAgbGV0IF90YWJsZXQgPSBudWxsO1xyXG4gICAgICAgIGlmICh0aGlzLl91c2VyQWdlbnQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgaWYgKFJFR19UQUJMRVRTLklQQUQuUkVHLnRlc3QodGhpcy5fdXNlckFnZW50KSkge1xyXG4gICAgICAgICAgICAgICAgX3RhYmxldCA9IFRBQkxFVC5JUEFEO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFJFR19UQUJMRVRTLlRBQkxFVC5SRUcudGVzdCh0aGlzLl91c2VyQWdlbnQpICYmIFJFR19NT0JJTEVTLkFORFJPSUQuUkVHLnRlc3QodGhpcy5fdXNlckFnZW50KSkge1xyXG4gICAgICAgICAgICAgICAgX3RhYmxldCA9IFRBQkxFVC5BTkRST0lEO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFJFR19UQUJMRVRTLktJTkRMRS5SRUcudGVzdCh0aGlzLl91c2VyQWdlbnQpKSB7XHJcbiAgICAgICAgICAgICAgICBfdGFibGV0ID0gVEFCTEVULktJTkRMRTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChSRUdfVEFCTEVUUy5UQUJMRVQuUkVHLnRlc3QodGhpcy5fdXNlckFnZW50KSkge1xyXG4gICAgICAgICAgICAgICAgX3RhYmxldCA9IFRBQkxFVC5HRU5FUklDX1RBQkxFVDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gX3RhYmxldDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuYW1lIG1vYmlsZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbW9iaWxlKCk6IFRNb2JpbGUge1xyXG4gICAgICAgIGxldCBfbW9iaWxlID0gbnVsbDtcclxuICAgICAgICBpZiAodGhpcy5fdXNlckFnZW50ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IF9yZWcgaW4gUkVHX01PQklMRVMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChSRUdfTU9CSUxFU1tfcmVnXS5SRUcudGVzdCh0aGlzLl91c2VyQWdlbnQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX21vYmlsZSA9IFJFR19NT0JJTEVTW19yZWddLlZBTFVFO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChfbW9iaWxlID09PSBudWxsICYmIHRoaXMuaXNNb2JpbGUoKSkge1xyXG4gICAgICAgICAgICAgICAgX21vYmlsZSA9IE1PQklMRS5HRU5FUklDX01PQklMRTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gX21vYmlsZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuYW1lIHdpbmRvd3NcclxuICAgICAqL1xyXG4gICAgcHVibGljIHdpbmRvd3MoKTogVFdpbmRvd3NPUyB7XHJcbiAgICAgICAgbGV0IF93aW5kb3dzID0gbnVsbDtcclxuICAgICAgICBpZiAodGhpcy5fdXNlckFnZW50ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IF9yZWcgaW4gUkVHX1dJTkRPV1NfT1NfVkVSU0lPTikge1xyXG4gICAgICAgICAgICAgICAgaWYgKFJFR19XSU5ET1dTX09TX1ZFUlNJT05bX3JlZ10uUkVHLnRlc3QodGhpcy5fdXNlckFnZW50KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF93aW5kb3dzID0gUkVHX1dJTkRPV1NfT1NfVkVSU0lPTltfcmVnXS5WQUxVRTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoX3dpbmRvd3MgPT09IG51bGwgJiYgdGhpcy5pc0Rlc2t0b3AoKSAmJiB0aGlzLmlzV2luZG93cygpKSB7XHJcbiAgICAgICAgICAgICAgICBfd2luZG93cyA9IFdJTkRPV1NfT1MuR0VORVJJQ19XSU5ET1dTO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBfd2luZG93cztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuYW1lIGxpbnV4XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBsaW51eCgpOiBUTGludXhPUyB7XHJcbiAgICAgICAgbGV0IF9saW51eDogVExpbnV4T1MgPSBudWxsO1xyXG4gICAgICAgIGlmICh0aGlzLl91c2VyQWdlbnQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgX3JlZyBpbiBSRUdfTElOVVhfT1MpIHtcclxuICAgICAgICAgICAgICAgIGlmIChSRUdfTElOVVhfT1NbX3JlZ10uUkVHLnRlc3QodGhpcy5fdXNlckFnZW50KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF9saW51eCA9IFJFR19MSU5VWF9PU1tfcmVnXS5WQUxVRTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoX2xpbnV4ID09PSBudWxsICYmIHRoaXMuaXNEZXNrdG9wKCkgJiYgdGhpcy5pc0xpbnV4KCkpIHtcclxuICAgICAgICAgICAgICAgIF9saW51eCA9IExJTlVYX09TLkdFTkVSSUNfTElOVVg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF9saW51eDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuYW1lIGlzTW9iaWxlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpc01vYmlsZSgpOiBib29sZWFuIHtcclxuICAgICAgICBsZXQgX3Jlc3VsdCA9IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLl91c2VyQWdlbnQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgbGV0IF91c2VyQWdlbnQgPSB0aGlzLl91c2VyQWdlbnQ7XHJcbiAgICAgICAgICAgIF9yZXN1bHQgPSAoUkVHX01PQklMRVMuR0VORVJJQ19SRUdfMS5SRUcudGVzdChfdXNlckFnZW50KSAmJiB0aGlzLmlzVGFibGV0KCkgPT09IGZhbHNlIHx8XHJcbiAgICAgICAgICAgICAgICBSRUdfTU9CSUxFUy5HRU5FUklDX1JFR18yLlJFRy50ZXN0KF91c2VyQWdlbnQuc3Vic3RyKDAsIDQpKSAmJiB0aGlzLmlzVGFibGV0KCkgPT09IGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF9yZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmFtZSBpc1RhYmxldFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaXNUYWJsZXQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgbGV0IF9yZXN1bHQgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5fdXNlckFnZW50ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIF9yZXN1bHQgPSAoUkVHX1RBQkxFVFMuSVBBRC5SRUcudGVzdCh0aGlzLl91c2VyQWdlbnQpIHx8XHJcbiAgICAgICAgICAgICAgICBSRUdfVEFCTEVUUy5LSU5ETEUuUkVHLnRlc3QodGhpcy5fdXNlckFnZW50KSB8fFxyXG4gICAgICAgICAgICAgICAgUkVHX1RBQkxFVFMuVEFCTEVULlJFRy50ZXN0KHRoaXMuX3VzZXJBZ2VudCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gX3Jlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuYW1lIGlzU01BUlRcclxuICAgICAqL1xyXG4gICAgcHVibGljIGlzU01BUlQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgbGV0IF9yZXN1bHQgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5fdXNlckFnZW50ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIF9yZXN1bHQgPSAoUkVHX1NNQVJUU19UVi5HRU5FUklDX1RWLlJFRy50ZXN0KHRoaXMuX3VzZXJBZ2VudCkgfHxcclxuICAgICAgICAgICAgICAgIFJFR19TTUFSVFNfVFYuUFM0LlJFRy50ZXN0KHRoaXMuX3VzZXJBZ2VudCkgfHxcclxuICAgICAgICAgICAgICAgIFJFR19TTUFSVFNfVFYuWEJPWF9PTkUuUkVHLnRlc3QodGhpcy5fdXNlckFnZW50KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBfcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5hbWUgaXNEZXNrdG9wXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpc0Rlc2t0b3AoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgbGV0IF9yZXN1bHQgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5fdXNlckFnZW50ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIF9yZXN1bHQgPSAhKHRoaXMuaXNNb2JpbGUoKSB8fCB0aGlzLmlzVGFibGV0KCkgfHwgdGhpcy5pc1NNQVJUKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gX3Jlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuYW1lIGlzR2FtZURldmljZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaXNHYW1lRGV2aWNlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGxldCBfcmVzdWx0ID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuX3VzZXJBZ2VudCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBfcmVzdWx0ID0gKFJFR19HQU1FX0RFVklDRVMuUFM0LlJFRy50ZXN0KHRoaXMuX3VzZXJBZ2VudCkgfHwgUkVHX0dBTUVfREVWSUNFUy5QUzMuUkVHLnRlc3QodGhpcy5fdXNlckFnZW50KVxyXG4gICAgICAgICAgICAgICAgfHwgUkVHX0dBTUVfREVWSUNFUy5YQk9YLlJFRy50ZXN0KHRoaXMuX3VzZXJBZ2VudCkgfHwgUkVHX0dBTUVfREVWSUNFUy5YQk9YX09ORS5SRUcudGVzdCh0aGlzLl91c2VyQWdlbnQpXHJcbiAgICAgICAgICAgICAgICB8fCBSRUdfR0FNRV9ERVZJQ0VTLldJSS5SRUcudGVzdCh0aGlzLl91c2VyQWdlbnQpIHx8IFJFR19HQU1FX0RFVklDRVMuV0lJX1UuUkVHLnRlc3QodGhpcy5fdXNlckFnZW50KVxyXG4gICAgICAgICAgICAgICAgfHwgUkVHX0dBTUVfREVWSUNFUy5OSU5URU5ET18zRFMuUkVHLnRlc3QodGhpcy5fdXNlckFnZW50KSB8fCBSRUdfR0FNRV9ERVZJQ0VTLlBTX1ZJVEEuUkVHLnRlc3QodGhpcy5fdXNlckFnZW50KVxyXG4gICAgICAgICAgICAgICAgfHwgUkVHX0dBTUVfREVWSUNFUy5QU1AuUkVHLnRlc3QodGhpcy5fdXNlckFnZW50KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBfcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5hbWUgaXNXaW5kb3dzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpc1dpbmRvd3MoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgbGV0IF9yZXN1bHQgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5fdXNlckFnZW50ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIF9yZXN1bHQgPSAoUkVHX09TLldJTkRPV1MuUkVHLnRlc3QodGhpcy5fdXNlckFnZW50KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBfcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5hbWUgaXNMaW51eFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaXNMaW51eCgpOiBib29sZWFuIHtcclxuICAgICAgICBsZXQgX3Jlc3VsdCA9IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLl91c2VyQWdlbnQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgX3Jlc3VsdCA9IChSRUdfT1MuTElOVVguUkVHLnRlc3QodGhpcy5fdXNlckFnZW50KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBfcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5hbWUgaXNCb3RcclxuICAgICAqL1xyXG4gICAgcHVibGljIGlzQm90KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGxldCBfcmVzdWx0ID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuX3VzZXJBZ2VudCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBfcmVzdWx0ID0gKFJFR19CT1RTLkdFTkVSSUNfQk9ULlJFRy50ZXN0KHRoaXMuX3VzZXJBZ2VudCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gX3Jlc3VsdDtcclxuICAgIH1cclxuXHJcbn1cclxuIl19