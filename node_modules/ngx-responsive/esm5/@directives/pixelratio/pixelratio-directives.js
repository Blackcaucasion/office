import { __decorate, __extends } from "tslib";
/**
 * @name pixelratio.directives
 * @description pixelratio directives in ngx-responsive
 *
 * @license MIT
 */
import { Directive, Input, Output, EventEmitter, TemplateRef, ViewContainerRef, OnInit, OnDestroy, ChangeDetectorRef } from '@angular/core';
import { ResponsiveState } from '../../@core/providers/responsive-state/responsive-state';
import { RESPONSIVE_BASE } from '../../@core/providers/responsive-base/responsive-base';
import { PlatformService } from '../../@core/providers/platform-service/platform.service';
/*======== 1x =========*/
var Is1xPixelDirective = /** @class */ (function (_super) {
    __extends(Is1xPixelDirective, _super);
    function Is1xPixelDirective(templateRef, viewContainer, _responsiveState, cd, platformService) {
        var _this = _super.call(this, templateRef, viewContainer, _responsiveState, cd, platformService) || this;
        _this._state = '1x';
        _this._showWhenTrue = true;
        return _this;
    }
    Object.defineProperty(Is1xPixelDirective.prototype, "is1xPixel", {
        set: function (grid_state) {
            this.setGrid(this._state, 'pixelratio');
        },
        enumerable: true,
        configurable: true
    });
    Is1xPixelDirective.ctorParameters = function () { return [
        { type: TemplateRef },
        { type: ViewContainerRef },
        { type: ResponsiveState },
        { type: ChangeDetectorRef },
        { type: PlatformService }
    ]; };
    __decorate([
        Input()
    ], Is1xPixelDirective.prototype, "is1xPixel", null);
    Is1xPixelDirective = __decorate([
        Directive({
            selector: '[is1xPixel]'
        })
    ], Is1xPixelDirective);
    return Is1xPixelDirective;
}(RESPONSIVE_BASE));
export { Is1xPixelDirective };
/*======== RETINA =========*/
var IsRetinaDirective = /** @class */ (function (_super) {
    __extends(IsRetinaDirective, _super);
    function IsRetinaDirective(templateRef, viewContainer, _responsiveState, cd, platformService) {
        var _this = _super.call(this, templateRef, viewContainer, _responsiveState, cd, platformService) || this;
        _this._state = 'retina';
        _this._showWhenTrue = true;
        return _this;
    }
    Object.defineProperty(IsRetinaDirective.prototype, "isRetina", {
        set: function (grid_state) {
            this.setGrid(this._state, 'pixelratio');
        },
        enumerable: true,
        configurable: true
    });
    IsRetinaDirective.ctorParameters = function () { return [
        { type: TemplateRef },
        { type: ViewContainerRef },
        { type: ResponsiveState },
        { type: ChangeDetectorRef },
        { type: PlatformService }
    ]; };
    __decorate([
        Input()
    ], IsRetinaDirective.prototype, "isRetina", null);
    IsRetinaDirective = __decorate([
        Directive({
            selector: '[isRetina]'
        })
    ], IsRetinaDirective);
    return IsRetinaDirective;
}(RESPONSIVE_BASE));
export { IsRetinaDirective };
/*======== 4K =========*/
var Is4kDirective = /** @class */ (function (_super) {
    __extends(Is4kDirective, _super);
    function Is4kDirective(templateRef, viewContainer, _responsiveState, cd, platformService) {
        var _this = _super.call(this, templateRef, viewContainer, _responsiveState, cd, platformService) || this;
        _this._state = '4k';
        _this._showWhenTrue = true;
        return _this;
    }
    Object.defineProperty(Is4kDirective.prototype, "isRetina", {
        set: function (grid_state) {
            this.setGrid(this._state, 'pixelratio');
        },
        enumerable: true,
        configurable: true
    });
    Is4kDirective.ctorParameters = function () { return [
        { type: TemplateRef },
        { type: ViewContainerRef },
        { type: ResponsiveState },
        { type: ChangeDetectorRef },
        { type: PlatformService }
    ]; };
    __decorate([
        Input()
    ], Is4kDirective.prototype, "isRetina", null);
    Is4kDirective = __decorate([
        Directive({
            selector: '[is4k]'
        })
    ], Is4kDirective);
    return Is4kDirective;
}(RESPONSIVE_BASE));
export { Is4kDirective };
/*======== DeviceInfo =========*/
var PixelRatioInfoDirective = /** @class */ (function () {
    function PixelRatioInfoDirective(_responsiveState, viewContainer, cd, platformService) {
        this._responsiveState = _responsiveState;
        this.viewContainer = viewContainer;
        this.cd = cd;
        this._isEnabledForPlatform = null;
        this.pixelratio = new EventEmitter();
        this._isEnabledForPlatform = platformService.isEnabledForPlatform();
    }
    Object.defineProperty(PixelRatioInfoDirective.prototype, "pixelratioInfo", {
        set: function (grid_state) {
            this.updateData(this.currentstate);
        },
        enumerable: true,
        configurable: true
    });
    PixelRatioInfoDirective.prototype.ngOnInit = function () {
        if (this._isEnabledForPlatform) {
            this._subscription = this._responsiveState.pixel$.subscribe(this.updateData.bind(this));
        }
    };
    PixelRatioInfoDirective.prototype.ngOnDestroy = function () {
        if (this._isEnabledForPlatform) {
            this._subscription.unsubscribe();
        }
    };
    PixelRatioInfoDirective.prototype.updateData = function (value) {
        var update = this._ifValueChanged(this.noRepeat, value);
        if (update) {
            this.pixelratio.emit(value);
            this.cd.markForCheck();
        }
    };
    PixelRatioInfoDirective.prototype._ifValueChanged = function (oldValue, newValue) {
        if (oldValue === newValue) {
            return false;
        }
        else {
            this.noRepeat = newValue;
            return true;
        }
    };
    PixelRatioInfoDirective.ctorParameters = function () { return [
        { type: ResponsiveState },
        { type: ViewContainerRef },
        { type: ChangeDetectorRef },
        { type: PlatformService }
    ]; };
    __decorate([
        Input()
    ], PixelRatioInfoDirective.prototype, "pixelratioInfo", null);
    __decorate([
        Output()
    ], PixelRatioInfoDirective.prototype, "pixelratio", void 0);
    PixelRatioInfoDirective = __decorate([
        Directive({ selector: 'pixel-ratio-info' })
    ], PixelRatioInfoDirective);
    return PixelRatioInfoDirective;
}());
export { PixelRatioInfoDirective };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGl4ZWxyYXRpby1kaXJlY3RpdmVzLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LXJlc3BvbnNpdmUvIiwic291cmNlcyI6WyJAZGlyZWN0aXZlcy9waXhlbHJhdGlvL3BpeGVscmF0aW8tZGlyZWN0aXZlcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7O0dBS0c7QUFDSCxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLFdBQVcsRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sZUFBZSxDQUFDO0FBSzVJLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSx5REFBeUQsQ0FBQztBQUMxRixPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sdURBQXVELENBQUM7QUFDeEYsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHlEQUF5RCxDQUFDO0FBRTFGLHlCQUF5QjtBQUl6QjtJQUF3QyxzQ0FBb0I7SUFReEQsNEJBQWMsV0FBNkIsRUFDN0IsYUFBK0IsRUFDL0IsZ0JBQWlDLEVBQ2pDLEVBQXFCLEVBQ3JCLGVBQWdDO1FBSjlDLFlBTUssa0JBQU8sV0FBVyxFQUFFLGFBQWEsRUFBRSxnQkFBZ0IsRUFBRSxFQUFFLEVBQUUsZUFBZSxDQUFFLFNBQzlFO1FBYlMsWUFBTSxHQUFHLElBQUksQ0FBQztRQUNkLG1CQUFhLEdBQUcsSUFBSSxDQUFDOztJQVkvQixDQUFDO0lBVlEsc0JBQUkseUNBQVM7YUFBYixVQUFlLFVBQWtCO1lBQ3RDLElBQUksQ0FBQyxPQUFPLENBQUUsSUFBSSxDQUFDLE1BQU0sRUFBRSxZQUFZLENBQUUsQ0FBQztRQUM5QyxDQUFDOzs7T0FBQTs7Z0JBQzBCLFdBQVc7Z0JBQ1QsZ0JBQWdCO2dCQUNiLGVBQWU7Z0JBQzdCLGlCQUFpQjtnQkFDSixlQUFlOztJQVByQztRQUFSLEtBQUssRUFBRTt1REFFUDtJQVBRLGtCQUFrQjtRQUg5QixTQUFTLENB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Q0FBQztTQUM3RjtJQUNMLENBQUM7SUFFRCw2Q0FBVyxHQUFYO1FBQ0ksSUFBSSxJQUFJLENBQUMscUJBQXFCLEVBQUU7WUFDNUIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxXQUFXLEVBQUUsQ0FBQztTQUNwQztJQUNMLENBQUM7SUFFRCw0Q0FBVSxHQUFWLFVBQVksS0FBVTtRQUNsQixJQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsS0FBSyxDQUFFLENBQUM7UUFDNUQsSUFBSSxNQUFNLEVBQUU7WUFDUixJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBRSxLQUFLLENBQUUsQ0FBQztZQUM5QixJQUFJLENBQUMsRUFBRSxDQUFDLFlBQVksRUFBRSxDQUFDO1NBQzFCO0lBQ0wsQ0FBQztJQUVELGlEQUFlLEdBQWYsVUFBaUIsUUFBYSxFQUFFLFFBQWE7UUFDekMsSUFBSyxRQUFRLEtBQUssUUFBUSxFQUFHO1lBQ3pCLE9BQU8sS0FBSyxDQUFDO1NBQ2hCO2FBQU07WUFDSCxJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztZQUN6QixPQUFPLElBQUksQ0FBQztTQUNmO0lBQ0wsQ0FBQzs7Z0JBbkM2QixlQUFlO2dCQUNsQixnQkFBZ0I7Z0JBQzNCLGlCQUFpQjtnQkFDWixlQUFlOztJQVYzQjtRQUFSLEtBQUssRUFBRTtpRUFFUDtJQUVTO1FBQVQsTUFBTSxFQUFFOytEQUFvRDtJQVhwRCx1QkFBdUI7UUFEbkMsU0FBUyxDQUFDLEVBQUUsUUFBUSxFQUFFLGtCQUFrQixFQUFFLENBQUM7T0FDL0IsdUJBQXVCLENBa0RuQztJQUFELDhCQUFDO0NBQUEsQUFsREQsSUFrREM7U0FsRFksdUJBQXVCIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEBuYW1lIHBpeGVscmF0aW8uZGlyZWN0aXZlc1xyXG4gKiBAZGVzY3JpcHRpb24gcGl4ZWxyYXRpbyBkaXJlY3RpdmVzIGluIG5neC1yZXNwb25zaXZlXHJcbiAqXHJcbiAqIEBsaWNlbnNlIE1JVFxyXG4gKi9cclxuaW1wb3J0IHsgRGlyZWN0aXZlLCBJbnB1dCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIFRlbXBsYXRlUmVmLCBWaWV3Q29udGFpbmVyUmVmLCBPbkluaXQsIE9uRGVzdHJveSwgQ2hhbmdlRGV0ZWN0b3JSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgUExBVEZPUk1fSUQsIEluamVjdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBpc1BsYXRmb3JtQnJvd3NlciB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XHJcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xyXG5cclxuaW1wb3J0IHsgUmVzcG9uc2l2ZVN0YXRlIH0gZnJvbSAnLi4vLi4vQGNvcmUvcHJvdmlkZXJzL3Jlc3BvbnNpdmUtc3RhdGUvcmVzcG9uc2l2ZS1zdGF0ZSc7XHJcbmltcG9ydCB7IFJFU1BPTlNJVkVfQkFTRSB9IGZyb20gJy4uLy4uL0Bjb3JlL3Byb3ZpZGVycy9yZXNwb25zaXZlLWJhc2UvcmVzcG9uc2l2ZS1iYXNlJztcclxuaW1wb3J0IHsgUGxhdGZvcm1TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vQGNvcmUvcHJvdmlkZXJzL3BsYXRmb3JtLXNlcnZpY2UvcGxhdGZvcm0uc2VydmljZSc7XHJcblxyXG4vKj09PT09PT09IDF4ID09PT09PT09PSovXHJcbkBEaXJlY3RpdmUoe1xyXG4gICAgc2VsZWN0b3I6ICdbaXMxeFBpeGVsXSdcclxufSlcclxuZXhwb3J0IGNsYXNzIElzMXhQaXhlbERpcmVjdGl2ZSBleHRlbmRzIFJFU1BPTlNJVkVfQkFTRTxhbnk+IHtcclxuXHJcbiAgICBwcm90ZWN0ZWQgX3N0YXRlID0gJzF4JztcclxuICAgIHByb3RlY3RlZCBfc2hvd1doZW5UcnVlID0gdHJ1ZTtcclxuXHJcbiAgICBASW5wdXQoKSBzZXQgaXMxeFBpeGVsKCBncmlkX3N0YXRlOiBzdHJpbmcgKSB7XHJcbiAgICAgICAgdGhpcy5zZXRHcmlkKCB0aGlzLl9zdGF0ZSwgJ3BpeGVscmF0aW8nICk7XHJcbiAgICB9XHJcbiAgICBjb25zdHJ1Y3RvciAoIHRlbXBsYXRlUmVmOiBUZW1wbGF0ZVJlZjxhbnk+LFxyXG4gICAgICAgICAgICAgICAgICB2aWV3Q29udGFpbmVyOiBWaWV3Q29udGFpbmVyUmVmLFxyXG4gICAgICAgICAgICAgICAgICBfcmVzcG9uc2l2ZVN0YXRlOiBSZXNwb25zaXZlU3RhdGUsXHJcbiAgICAgICAgICAgICAgICAgIGNkOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgICAgICAgICAgICAgICAgcGxhdGZvcm1TZXJ2aWNlOiBQbGF0Zm9ybVNlcnZpY2VcclxuICAgICAgICAgKSB7XHJcbiAgICAgICAgIHN1cGVyKCB0ZW1wbGF0ZVJlZiwgdmlld0NvbnRhaW5lciwgX3Jlc3BvbnNpdmVTdGF0ZSwgY2QsIHBsYXRmb3JtU2VydmljZSApO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKj09PT09PT09IFJFVElOQSA9PT09PT09PT0qL1xyXG5ARGlyZWN0aXZlKFxyXG57XHJcbiAgICBzZWxlY3RvcjogJ1tpc1JldGluYV0nXHJcbn0pXHJcblxyXG5leHBvcnQgY2xhc3MgSXNSZXRpbmFEaXJlY3RpdmUgZXh0ZW5kcyBSRVNQT05TSVZFX0JBU0U8YW55PiB7XHJcblxyXG4gICAgcHJvdGVjdGVkIF9zdGF0ZSA9ICdyZXRpbmEnO1xyXG4gICAgcHJvdGVjdGVkIF9zaG93V2hlblRydWUgPSB0cnVlO1xyXG5cclxuICAgIEBJbnB1dCgpIHNldCBpc1JldGluYSggZ3JpZF9zdGF0ZTogc3RyaW5nICkge1xyXG4gICAgICAgIHRoaXMuc2V0R3JpZCggdGhpcy5fc3RhdGUsICdwaXhlbHJhdGlvJyApO1xyXG4gICAgfVxyXG4gICAgY29uc3RydWN0b3IoIHRlbXBsYXRlUmVmOiBUZW1wbGF0ZVJlZjxhbnk+LFxyXG4gICAgICAgICAgICAgICAgIHZpZXdDb250YWluZXI6IFZpZXdDb250YWluZXJSZWYsXHJcbiAgICAgICAgICAgICAgICAgX3Jlc3BvbnNpdmVTdGF0ZTogUmVzcG9uc2l2ZVN0YXRlLFxyXG4gICAgICAgICAgICAgICAgIGNkOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgICAgICAgICAgICAgICBwbGF0Zm9ybVNlcnZpY2U6IFBsYXRmb3JtU2VydmljZVxyXG4gICAgICAgICkge1xyXG4gICAgICAgIHN1cGVyKCB0ZW1wbGF0ZVJlZiwgdmlld0NvbnRhaW5lciwgX3Jlc3BvbnNpdmVTdGF0ZSwgY2QsIHBsYXRmb3JtU2VydmljZSApO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKj09PT09PT09IDRLID09PT09PT09PSovXHJcbkBEaXJlY3RpdmUoXHJcbntcclxuICAgIHNlbGVjdG9yOiAnW2lzNGtdJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgSXM0a0RpcmVjdGl2ZSBleHRlbmRzIFJFU1BPTlNJVkVfQkFTRTxhbnk+IHtcclxuXHJcbiAgICBwcm90ZWN0ZWQgX3N0YXRlID0gJzRrJztcclxuICAgIHByb3RlY3RlZCBfc2hvd1doZW5UcnVlID0gdHJ1ZTtcclxuXHJcbiAgICBASW5wdXQoKSBzZXQgaXNSZXRpbmEoIGdyaWRfc3RhdGU6IHN0cmluZyApIHtcclxuICAgICAgICB0aGlzLnNldEdyaWQoIHRoaXMuX3N0YXRlLCAncGl4ZWxyYXRpbycgKTtcclxuICAgIH1cclxuICAgIGNvbnN0cnVjdG9yKCB0ZW1wbGF0ZVJlZjogVGVtcGxhdGVSZWY8YW55PixcclxuICAgICAgICAgICAgICAgICB2aWV3Q29udGFpbmVyOiBWaWV3Q29udGFpbmVyUmVmLFxyXG4gICAgICAgICAgICAgICAgX3Jlc3BvbnNpdmVTdGF0ZTogUmVzcG9uc2l2ZVN0YXRlLFxyXG4gICAgICAgICAgICAgICAgY2Q6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgICAgICAgICAgICAgcGxhdGZvcm1TZXJ2aWNlOiBQbGF0Zm9ybVNlcnZpY2VcclxuICAgICAgICkge1xyXG4gICAgICAgc3VwZXIoIHRlbXBsYXRlUmVmLCB2aWV3Q29udGFpbmVyLCBfcmVzcG9uc2l2ZVN0YXRlLCBjZCwgcGxhdGZvcm1TZXJ2aWNlICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qPT09PT09PT0gRGV2aWNlSW5mbyA9PT09PT09PT0qL1xyXG5cclxuQERpcmVjdGl2ZSh7IHNlbGVjdG9yOiAncGl4ZWwtcmF0aW8taW5mbycgfSlcclxuZXhwb3J0IGNsYXNzIFBpeGVsUmF0aW9JbmZvRGlyZWN0aXZlIGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3kge1xyXG5cclxuICAgIHB1YmxpYyBjdXJyZW50c3RhdGU6IHN0cmluZztcclxuICAgIHByaXZhdGUgX3N1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xyXG4gICAgcHJpdmF0ZSBub1JlcGVhdDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfaXNFbmFibGVkRm9yUGxhdGZvcm06IGJvb2xlYW4gPSBudWxsO1xyXG5cclxuICAgIEBJbnB1dCgpIHNldCBwaXhlbHJhdGlvSW5mbyggZ3JpZF9zdGF0ZTogc3RyaW5nW10gfCBzdHJpbmcgKSB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVEYXRhKCB0aGlzLmN1cnJlbnRzdGF0ZSApO1xyXG4gICAgfVxyXG5cclxuICAgIEBPdXRwdXQoKSBwaXhlbHJhdGlvOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIF9yZXNwb25zaXZlU3RhdGU6IFJlc3BvbnNpdmVTdGF0ZSxcclxuICAgICAgICBwcml2YXRlIHZpZXdDb250YWluZXI6IFZpZXdDb250YWluZXJSZWYsXHJcbiAgICAgICAgcHJpdmF0ZSBjZDogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICAgICAgcGxhdGZvcm1TZXJ2aWNlOiBQbGF0Zm9ybVNlcnZpY2VcclxuICAgICkge1xyXG4gICAgICAgIHRoaXMuX2lzRW5hYmxlZEZvclBsYXRmb3JtID0gcGxhdGZvcm1TZXJ2aWNlLmlzRW5hYmxlZEZvclBsYXRmb3JtKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2lzRW5hYmxlZEZvclBsYXRmb3JtKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3N1YnNjcmlwdGlvbiA9IHRoaXMuX3Jlc3BvbnNpdmVTdGF0ZS5waXhlbCQuc3Vic2NyaWJlKHRoaXMudXBkYXRlRGF0YS5iaW5kKCB0aGlzICkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ09uRGVzdHJveSgpIHtcclxuICAgICAgICBpZiAodGhpcy5faXNFbmFibGVkRm9yUGxhdGZvcm0pIHtcclxuICAgICAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZURhdGEoIHZhbHVlOiBhbnkgKSB7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlID0gdGhpcy5faWZWYWx1ZUNoYW5nZWQoIHRoaXMubm9SZXBlYXQsIHZhbHVlICk7XHJcbiAgICAgICAgaWYgKHVwZGF0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnBpeGVscmF0aW8uZW1pdCggdmFsdWUgKTtcclxuICAgICAgICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX2lmVmFsdWVDaGFuZ2VkKCBvbGRWYWx1ZTogYW55LCBuZXdWYWx1ZTogYW55ICk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICggb2xkVmFsdWUgPT09IG5ld1ZhbHVlICkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5ub1JlcGVhdCA9IG5ld1ZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIl19